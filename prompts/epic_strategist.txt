RESPONSE FORMAT: ONLY valid JSON array. NO text, NO markdown, NO explanations.

CONTEXT VARIABLES:
- product_vision: Full vision text provided below
- max_epics: ${max_epics} epics required
- project_name: ${project_name}
- domain: ${domain}
- target_users: ${target_users}
- timeline: ${timeline}
- budget_constraints: ${budget_constraints}

EXAMPLE EPICS (your output MUST follow these patterns):

For Transportation domain:
[
  {
    "title": "Urban Commuter One-Tap Ride Request & Dispatch",
    "description": "Enable Urban Commuters and College Students to request autonomous vehicles with single tap, achieving <45s dispatch through cloud-based fleet optimization and real-time vehicle tracking on mobile platforms.",
    "priority": "High",
    "estimated_complexity": "L",
    "category": "core_platform"
  }
]

For Agriculture domain:
[
  {
    "title": "Smallholder Farmer Crop Yield Analytics Dashboard",
    "description": "Provide Smallholder Farmers and Cooperatives with mobile-first yield forecasting using satellite imagery, soil moisture data, and irrigation analytics to optimize crop production and enable data-driven farm management decisions.",
    "priority": "High",
    "estimated_complexity": "L",
    "category": "core_platform"
  }
]

For Healthcare domain:
[
  {
    "title": "Physician Clinical Decision Support System",
    "description": "Empower Physicians and Nurses with AI-driven diagnosis recommendations, treatment protocols, and patient outcome predictions integrated with EHR systems to improve clinical accuracy and reduce medical errors by 30%.",
    "priority": "High",
    "estimated_complexity": "XL",
    "category": "core_platform"
  }
]

For Energy domain:
[
  {
    "title": "Grid Operators Real-Time Renewable Integration Dashboard",
    "description": "Enable Grid Operators and Energy Producers to monitor renewable energy integration, forecast load balancing requirements, and optimize grid stability through SCADA/EMS integration with <30s response time for demand response events.",
    "priority": "High",
    "estimated_complexity": "L",
    "category": "core_platform"
  }
]

For Environmental Services domain:
[
  {
    "title": "ESG Teams Carbon Accounting & Compliance Platform",
    "description": "Provide ESG Teams and Sustainability Officers with real-time Scope 1-3 emissions tracking, regulatory compliance reporting (GHG Protocol, SEC), and carbon reduction scenario modeling to achieve 15% GHG intensity reduction targets.",
    "priority": "High",
    "estimated_complexity": "XL",
    "category": "core_platform"
  }
]

CRITICAL QUALITY REQUIREMENTS (ALL MANDATORY for 75+ score):

1. **SPECIFIC USERS ARE MANDATORY** - MUST include in title or description:
   - ❌ REJECTED: "users", "customers", "stakeholders", "people"
   - ✅ REQUIRED: Exact user types from vision like:
     * Agriculture: "Smallholder Farmers", "Agri-Lenders", "Rural Banks", "Cooperatives"
     * Healthcare: "Physicians", "Nurses", "Patients", "Hospital Administrators"
     * Finance: "Retail Investors", "Wealth Managers", "Bank Tellers", "Loan Officers"
   
2. **DOMAIN TERMINOLOGY IS ENCOURAGED** - Include domain-appropriate terms:
   - Agriculture: crop, yield, soil, irrigation, harvest, farm, livestock, agronomy
   - Healthcare: patient, diagnosis, clinical, treatment, EHR, HIPAA, medical
   - Finance: transaction, portfolio, compliance, KYC/AML, ledger, underwriting
   - Retail: inventory, point-of-sale, merchandising, supply chain, omnichannel
   - Education: curriculum, assessment, enrollment, student outcomes, LMS
   - Energy: grid management, renewable, emissions, GHG, smart meters, SCADA, carbon
   - Environmental: waste management, sustainability, compliance, carbon footprint
   - NOTE: Infrastructure epics (auth, database, etc.) may not need domain terms
   
3. **FLEXIBLE SCORING APPROACH**:
   - Epic titles SHOULD contain specific user types (higher score)
   - Epic descriptions SHOULD use domain-appropriate language
   - Infrastructure/platform epics evaluated differently
   - Quality based on overall relevance, not rigid term counting
   
4. **OTHER REQUIREMENTS**:
   ✓ Title ≤60 chars using EXACT terms from vision
   ✓ References specific product name from vision
   ✓ Includes platform (mobile, iOS, web, etc.) from vision
   ✓ Ties to measurable outcome (e.g., <45s dispatch, 90% coverage)
   ✓ Valid JSON with all required fields

⚠️ QUALITY GATE: Epics are evaluated holistically - domain relevance, user specificity, and vision alignment all contribute to achieving the 75+ score threshold.

EPIC STRUCTURE:
- title: Specific capability from vision (max 60 chars)
- description: WHO uses it, WHAT it does, HOW it delivers value (2-3 sentences)
- priority: High|Medium|Low based on vision emphasis
- estimated_complexity: XS|S|M|L|XL
- category: core_platform|user_experience|data_management|integration|security|performance|administration

FINAL INSTRUCTIONS:
1. ANALYZE the vision to identify ALL specific user types mentioned
2. USE those exact user types in your epic titles (e.g., "Smallholder Farmers", not "farmers")
3. INCLUDE multiple ${domain}-specific terms in each description
4. FOLLOW the example patterns above for the ${domain} domain
5. ENSURE each epic passes ALL quality requirements or it will be rejected

Remember: Focus on creating epics that genuinely address the vision's goals. Quality scoring considers context - infrastructure epics don't need domain terms, while domain-specific features should use appropriate terminology.

Now generate ${max_epics} epics for "${project_name}" in the ${domain} domain based on this vision:

${product_vision}